{% extends "base.html" %} {% load static %}
{% block main %}

<div class="container mt-4">
     <h2 class="text-primary text-center mb-4">Document Classifier</h2>
 
     <!-- Create Label Section -->
     <div class="card shadow-sm p-4 mb-4">
         <h3 class="text-secondary">Create a Label</h3>
         <form method="post">
             {% csrf_token %}
             <div class="mb-3">
                 {{ label_form.as_p }}
             </div>
             <button type="submit" name="create_label" class="btn btn-success">Create Label</button>
         </form>
     </div>
 
     <!-- Upload Image Section -->
     <div class="card shadow-sm p-4 mb-4">
         <h3 class="text-secondary">Upload an Image</h3>
         <form method="post" enctype="multipart/form-data">
             {% csrf_token %}
             <div class="mb-3">
                 {{ image_form.as_p }}
             </div>
             <button type="submit" name="upload_image" class="btn btn-primary">Upload Image</button>
         </form>
     </div>
 
     <!-- Labels Display -->
     <div class="card shadow-sm p-4 mb-4">
         <h3 class="text-secondary">Available Labels</h3>
         <ul class="list-group">
             {% for label in labels %}
             <li class="list-group-item">{{ label.name }}</li>
             {% endfor %}
         </ul>
     </div>
 
     <!-- Uploaded Images Display -->
     <div class="card shadow-sm p-4 mb-4">
         <h3 class="text-secondary">Uploaded Images</h3>
         <div class="row">
             {% for image in images %}
             <div class="col-md-3 mb-3">
                 <div class="card">
                     <img src="{{ image.image.url }}" class="card-img-top" alt="{{ image.image.name }}">
                     <div class="card-body text-center">
                         <p class="card-text"><strong>{{ image.label.name }}</strong></p>
                     </div>
                 </div>
             </div>
             {% endfor %}
         </div>
     </div>
 
     <!-- Train Model Section -->
     <div class="text-center mb-4">
         <form method="post" action="{% url 'train_model' %}">
             {% csrf_token %}
             <button type="submit" class="btn btn-warning">Train Model</button>
         </form>
     </div>
 
     <!-- Predict Label Section -->
     <div class="card shadow-sm p-4">
         <h3 class="text-secondary">Predict a Label</h3>
         <form method="post" enctype="multipart/form-data" action="{% url 'predict_label' %}">
             {% csrf_token %}
             <div class="mb-3">
                 <input type="file" name="image" class="form-control" required>
             </div>
             <button type="submit" class="btn btn-danger">Predict</button>
         </form>
     </div>
 </div>
 
 <!-- Bootstrap CDN (if not already included in base.html) -->
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
 
 {% endblock main %}

